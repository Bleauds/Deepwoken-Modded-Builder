import{s as ie,n as Y,c as ue,d as Z,r as oe}from"./By8VydLX.js";import{e as P,t as L,c as y,a as w,b as U,d as p,g as k,i as E,h as v,j as C,k as S,l as I,q as A,w as $,y as H,r as x}from"./nyUOTgEe.js";import{S as se,i as re,b as R,d as F,m as V,t as _,g as J,a as g,c as K,e as q}from"./CLoJ4m2a.js";import{u as ce,a as ee}from"./CVAU0KcF.js";import{I as W,t as j}from"./DpzCjbIr.js";import{g as fe}from"./CvMp4_US.js";function de(a){let e,t=a[0].name+"",r,l,s;return{c(){e=P("div"),r=L(t),this.h()},l(n){e=y(n,"DIV",{class:!0,style:!0,title:!0});var u=w(e);r=U(u,t),u.forEach(p),this.h()},h(){k(e,"class","author-title border-edge svelte-f51a25"),k(e,"style",l=`color: ${a[0].color}`),k(e,"title",s=a[0].description)},m(n,u){E(n,e,u),v(e,r)},p(n,[u]){u&1&&t!==(t=n[0].name+"")&&C(r,t),u&1&&l!==(l=`color: ${n[0].color}`)&&k(e,"style",l),u&1&&s!==(s=n[0].description)&&k(e,"title",s)},i:Y,o:Y,d(n){n&&p(e)}}}function he(a,e,t){let{title:r={name:"Title",color:"white",description:"Description"}}=e;return a.$$set=l=>{"title"in l&&t(0,r=l.title)},[r]}class Be extends se{constructor(e){super(),re(this,e,he,de,ie,{title:0})}}function te(a){let e,t,r,l,s,n;const u=[pe,me],i=[];function d(o,c){return o[1]?0:1}return t=d(a),r=i[t]=u[t](a),{c(){e=P("div"),r.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var c=w(e);r.l(c),c.forEach(p),this.h()},h(){k(e,"class","menu-dropdown-dots svelte-18h6jo9")},m(o,c){E(o,e,c),i[t].m(e,null),a[19](e),l=!0,s||(n=[Z(a[12].call(null,e)),Z(a[13].call(null,e))],s=!0)},p(o,c){let m=t;t=d(o),t===m?i[t].p(o,c):(J(),g(i[m],1,1,()=>{i[m]=null}),K(),r=i[t],r?r.p(o,c):(r=i[t]=u[t](o),r.c()),_(r,1),r.m(e,null))},i(o){l||(_(r),l=!0)},o(o){g(r),l=!1},d(o){o&&p(e),i[t].d(),a[19](null),s=!1,oe(n)}}}function me(a){let e,t,r,l,s=a[2]?"Make Public":"Make Private",n,u,i,d;return t=new W({props:{icon:"octicon:eye"+(a[2]?"-closed":"")+"-16"}}),{c(){e=P("button"),R(t.$$.fragment),r=S(),l=P("span"),n=L(s),this.h()},l(o){e=y(o,"BUTTON",{class:!0});var c=w(e);F(t.$$.fragment,c),r=I(c),l=y(c,"SPAN",{});var m=w(l);n=U(m,s),m.forEach(p),c.forEach(p),this.h()},h(){k(e,"class","w-full px-4 py-2 text-left hover:bg-black/5 flex items-center gap-2 svelte-18h6jo9")},m(o,c){E(o,e,c),V(t,e,null),v(e,r),v(e,l),v(l,n),u=!0,i||(d=A(e,"click",H(Q(a[11]))),i=!0)},p(o,c){const m={};c&4&&(m.icon="octicon:eye"+(o[2]?"-closed":"")+"-16"),t.$set(m),(!u||c&4)&&s!==(s=o[2]?"Make Public":"Make Private")&&C(n,s)},i(o){u||(_(t.$$.fragment,o),u=!0)},o(o){g(t.$$.fragment,o),u=!1},d(o){o&&p(e),q(t),i=!1,d()}}}function pe(a){let e,t,r,l=a[3]&&le(a),s=a[8]&&ne(a);return{c(){l&&l.c(),e=S(),s&&s.c(),t=x()},l(n){l&&l.l(n),e=I(n),s&&s.l(n),t=x()},m(n,u){l&&l.m(n,u),E(n,e,u),s&&s.m(n,u),E(n,t,u),r=!0},p(n,u){n[3]?l?(l.p(n,u),u&8&&_(l,1)):(l=le(n),l.c(),_(l,1),l.m(e.parentNode,e)):l&&(J(),g(l,1,1,()=>{l=null}),K()),n[8]?s?(s.p(n,u),u&256&&_(s,1)):(s=ne(n),s.c(),_(s,1),s.m(t.parentNode,t)):s&&(J(),g(s,1,1,()=>{s=null}),K())},i(n){r||(_(l),_(s),r=!0)},o(n){g(l),g(s),r=!1},d(n){n&&(p(e),p(t)),l&&l.d(n),s&&s.d(n)}}}function le(a){let e,t,r,l,s=a[0]?"Unsave":"Save to Profile",n,u,i,d;return t=new W({props:{icon:"octicon:bookmark-"+(a[0]?"slash":"fill")+"-24"}}),{c(){e=P("button"),R(t.$$.fragment),r=S(),l=P("span"),n=L(s),this.h()},l(o){e=y(o,"BUTTON",{class:!0});var c=w(e);F(t.$$.fragment,c),r=I(c),l=y(c,"SPAN",{});var m=w(l);n=U(m,s),m.forEach(p),c.forEach(p),this.h()},h(){k(e,"class","w-full px-4 py-2 text-left hover:bg-black/5 flex items-center gap-2 svelte-18h6jo9")},m(o,c){E(o,e,c),V(t,e,null),v(e,r),v(e,l),v(l,n),u=!0,i||(d=A(e,"click",H(Q(a[9]))),i=!0)},p(o,c){const m={};c&1&&(m.icon="octicon:bookmark-"+(o[0]?"slash":"fill")+"-24"),t.$set(m),(!u||c&1)&&s!==(s=o[0]?"Unsave":"Save to Profile")&&C(n,s)},i(o){u||(_(t.$$.fragment,o),u=!0)},o(o){g(t.$$.fragment,o),u=!1},d(o){o&&p(e),q(t),i=!1,d()}}}function ne(a){let e,t,r,l,s=a[2]?"Make Public":"Make Private",n,u,i,d,o,c,m=a[5]?"Deleting...":"Delete Build",N,T,O,z;return t=new W({props:{icon:"octicon:eye-"+(a[2]?"slash":"")+"-16"}}),d=new W({props:{icon:"octicon:trash-16"}}),{c(){e=P("button"),R(t.$$.fragment),r=S(),l=P("span"),n=L(s),u=S(),i=P("button"),R(d.$$.fragment),o=S(),c=P("span"),N=L(m),this.h()},l(h){e=y(h,"BUTTON",{class:!0});var b=w(e);F(t.$$.fragment,b),r=I(b),l=y(b,"SPAN",{});var D=w(l);n=U(D,s),D.forEach(p),b.forEach(p),u=I(h),i=y(h,"BUTTON",{class:!0});var M=w(i);F(d.$$.fragment,M),o=I(M),c=y(M,"SPAN",{});var G=w(c);N=U(G,m),G.forEach(p),M.forEach(p),this.h()},h(){k(e,"class","w-full px-4 py-2 text-left hover:bg-black/5 flex items-center gap-2 svelte-18h6jo9"),k(i,"class","w-full px-4 py-2 text-left hover:bg-black/5 flex items-center gap-2 text-red-600 svelte-18h6jo9"),i.disabled=a[5]},m(h,b){E(h,e,b),V(t,e,null),v(e,r),v(e,l),v(l,n),E(h,u,b),E(h,i,b),V(d,i,null),v(i,o),v(i,c),v(c,N),T=!0,O||(z=[A(e,"click",H(Q(a[11]))),A(i,"click",H(Q(a[10])))],O=!0)},p(h,b){const D={};b&4&&(D.icon="octicon:eye-"+(h[2]?"slash":"")+"-16"),t.$set(D),(!T||b&4)&&s!==(s=h[2]?"Make Public":"Make Private")&&C(n,s),(!T||b&32)&&m!==(m=h[5]?"Deleting...":"Delete Build")&&C(N,m),(!T||b&32)&&(i.disabled=h[5])},i(h){T||(_(t.$$.fragment,h),_(d.$$.fragment,h),T=!0)},o(h){g(t.$$.fragment,h),g(d.$$.fragment,h),T=!1},d(h){h&&(p(e),p(u),p(i)),q(t),q(d),O=!1,oe(z)}}}function be(a){let e,t,r,l,s,n,u;r=new W({props:{icon:"octicon:kebab-vertical"}});let i=a[4]&&te(a);return{c(){e=P("div"),t=P("button"),R(r.$$.fragment),l=S(),i&&i.c(),this.h()},l(d){e=y(d,"DIV",{class:!0});var o=w(e);t=y(o,"BUTTON",{class:!0});var c=w(t);F(r.$$.fragment,c),c.forEach(p),l=I(o),i&&i.l(o),o.forEach(p),this.h()},h(){k(t,"class","p-1 rounded hover:bg-black/5 transition-colors svelte-18h6jo9"),k(e,"class","menu-container svelte-18h6jo9")},m(d,o){E(d,e,o),v(e,t),V(r,t,null),a[18](t),v(e,l),i&&i.m(e,null),s=!0,n||(u=A(e,"click",a[14]),n=!0)},p(d,[o]){d[4]?i?(i.p(d,o),o&16&&_(i,1)):(i=te(d),i.c(),_(i,1),i.m(e,null)):i&&(J(),g(i,1,1,()=>{i=null}),K())},i(d){s||(_(r.$$.fragment,d),_(i),s=!0)},o(d){g(r.$$.fragment,d),g(i),s=!1},d(d){d&&p(e),q(r),a[18](null),i&&i.d(),n=!1,u()}}}function Q(a){return e=>{e.preventDefault(),e.stopPropagation(),a()}}function _e(a,e,t){let r,l;ue(a,ce,f=>t(3,l=f));let{isLoadedBuild:s}=e,{buildId:n}=e,{onPrivacyToggle:u}=e,{data:i}=e,{isSaved:d=!1}=e,{isPrivate:o=!1}=e,c=!1,m=!1;async function N(){if(!n){j.push("Cannot save build: No build ID");return}try{const f=await fetch(`${ee}/user/builds/save/${n}`,{method:"POST",credentials:"include"});if(!f.ok)throw new Error("Failed to save build");const B=await f.json();t(0,d=B.saved),j.push(d?"Build saved to profile":"Build removed from profile"),t(4,c=!1),i.onRefresh&&i.onRefresh()}catch(f){console.error("Error saving build:",f),j.push("Failed to save build")}}async function T(){if(!n||!r){j.push("Cannot delete build: Invalid permissions");return}if(confirm("Are you sure you want to delete this build? This action cannot be undone.")){t(5,m=!0);try{if(!(await fetch(`${ee}/build/${n}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete build");j.push("Build deleted successfully"),t(4,c=!1),i.onRefresh?i.onRefresh():fe("/")}catch(f){console.error("Error deleting build:",f),j.push("Failed to delete build")}finally{t(5,m=!1)}}}function O(){u(),t(4,c=!1)}function z(f){const B=X=>{f&&!f.contains(X.target)&&(X.stopPropagation(),t(4,c=!1))};return document.addEventListener("click",B,!0),{destroy(){document.removeEventListener("click",B,!0)}}}let h,b;function D(f){if(!h)return;const B=h.getBoundingClientRect();f.style.top=`${B.bottom+5}px`,f.style.left=`${B.left-f.offsetWidth+h.offsetWidth}px`}function M(f){f.stopPropagation(),t(4,c=!c)}function G(f){$[f?"unshift":"push"](()=>{h=f,t(6,h)})}function ae(f){$[f?"unshift":"push"](()=>{b=f,t(7,b)})}return a.$$set=f=>{"isLoadedBuild"in f&&t(1,s=f.isLoadedBuild),"buildId"in f&&t(15,n=f.buildId),"onPrivacyToggle"in f&&t(16,u=f.onPrivacyToggle),"data"in f&&t(17,i=f.data),"isSaved"in f&&t(0,d=f.isSaved),"isPrivate"in f&&t(2,o=f.isPrivate)},a.$$.update=()=>{var f,B;a.$$.dirty&131080&&t(8,r=l&&((B=(f=i==null?void 0:i.build)==null?void 0:f.author)==null?void 0:B.verifiedId)===l.id)},[d,s,o,l,c,m,h,b,r,N,T,O,z,D,M,n,u,i,G,ae]}class Ee extends se{constructor(e){super(),re(this,e,_e,be,ie,{isLoadedBuild:1,buildId:15,onPrivacyToggle:16,data:17,isSaved:0,isPrivate:2})}}export{Ee as B,Be as T};
//# sourceMappingURL=qGA1VRrx.js.map
